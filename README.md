# Encore — Управление музыкальными событиями

**Encore** — это веб-платформа для автоматизации работы музыкальных коллективов. Проект позволяет бронировать репетиции, отслеживать график концертов, управлять составом групп и предоставляет административную панель для управления контентом.

---

## Реализованные функции

### Бронирование репетиций
- Онлайн-запись на репетиции с выбором группы, времени и места
- Просмотр списка забронированных репетиций
- Валидация формы бронирования

### Концертная афиша
- Разделение на предстоящие и прошедшие мероприятия
- Детальная информация о каждом концерте
- Поиск и фильтрация концертов по дате и названию
- Пагинация для удобного просмотра

### Управление группами и музыкантами
- Создание и редактирование музыкальных групп
- Управление составом групп (добавление/удаление музыкантов)
- Загрузка логотипов групп
- Поиск и фильтрация групп по названию и жанру

### Личный кабинет
- Регистрация и авторизация пользователей
- Редактирование профиля (имя, телефон, инструмент, Telegram)
- Смена пароля
- Восстановление пароля по email

### Администрирование
- **Кастомная административная панель** для управления всеми сущностями системы
- Стандартная Django-админка
- Управление музыкантами, группами, концертами, репетициями, выступлениями и членствами
- Доступ только для staff-пользователей

### Дополнительные возможности
- Система ролей (музыкант/администратор)
- Валидация данных в формах
- Обработка ошибок и пользовательские сообщения
- Адаптивный дизайн с Bootstrap 5
- Поддержка русской локализации

---

## Инструкция по установке и запуску проекта локально

### Предварительные требования
- Python 3.11 или выше
- PostgreSQL
- Git

### 1. Клонирование репозитория
```bash
git clone <url-репозитория>
cd encore
```

### 2. Создание виртуального окружения
```bash
python -m venv venv

# Для Windows
venv\Scripts\activate

# Для Linux/Mac
source venv/bin/activate
```

### 3. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 4. Настройка базы данных PostgreSQL
```sql
-- Создайте базу данных в PostgreSQL
CREATE DATABASE concerts_db;
CREATE USER encore_user WITH PASSWORD 'your_password';
GRANT ALL PRIVILEGES ON DATABASE concerts_db TO encore_user;
```

### 5. Настройка переменных окружения
Создайте файл `.env` в корне проекта:
```env
SECRET_KEY=ваш_секретный_ключ_здесь
DEBUG=True
DATABASE_URL=postgres://encore_user:your_password@localhost:5432/concerts_db
```

### 6. Применение миграций
```bash
python manage.py makemigrations
python manage.py migrate
```

### 7. Создание суперпользователя
```bash
python manage.py createsuperuser
```

### 8. Запуск сервера разработки
```bash
python manage.py runserver
```

Приложение будет доступно по адресу: http://localhost:8000

---

## Инструкция по установке и запуску (Docker)

Проект полностью контейнеризирован для быстрого развертывания.

### 1. Требования
- Установленный **Docker** и **Docker Compose**

### 2. Сборка и запуск
```bash
# Сборка и запуск контейнеров в фоновом режиме
docker-compose up -d --build

# Просмотр логов
docker-compose logs -f web

# Остановка контейнеров
docker-compose down
```

Приложение будет доступно по адресу: http://localhost:8000

---

## Инструкция по запуску тестов

### 1. Запуск всех тестов
```bash
python manage.py test
```

### 2. Запуск тестов для конкретного приложения
```bash
# Тесты для бронирования
python manage.py test booking

# Тесты для концертов
python manage.py test concertsshower

# Тесты для административной панели
python manage.py test custom_admin

# Тесты для авторизации
python manage.py test for_authorization

# Тесты для управления группами
python manage.py test groups
```

### 3. Запуск тестов с подробным выводом
```bash
python manage.py test --verbosity=2
```

### 4. Запуск тестов с покрытием (coverage)
```bash
pip install coverage
coverage run manage.py test
coverage report
coverage html  # Генерация HTML-отчета
```

### 5. Тестирование с Docker
```bash
# Запуск тестов в контейнере
docker-compose run web python manage.py test
```

### 6. Структура тестов
- **booking**: тесты бронирования репетиций
- **concertsshower**: тесты отображения концертов
- **custom_admin**: тесты административной панели (CRUD операции)
- **for_authorization**: тесты авторизации и регистрации
- **groups**: тесты управления группами и правами доступа

---

## Роли пользователей

### Музыкант
- Просмотр своего профиля
- Бронирование репетиций
- Просмотр концертов
- Просмотр групп, в которых состоит

### Администратор (Staff)
- Полный доступ к кастомной админ-панели
- Управление всеми сущностями системы
- Создание, редактирование и удаление групп
- Добавление музыкантов в группы

---

## Технический стек

- **Backend**: Django 5.2, Python 3.11
- **База данных**: PostgreSQL
- **Фронтенд**: HTML, CSS, Bootstrap 5, JavaScript
- **Контейнеризация**: Docker, Docker Compose
- **Тестирование**: Django Test Framework
- **Деплой**: Docker-based deployment

---

## Отладка и логирование

Для отладки в режиме разработки включен вывод SQL-запросов в консоль. Для просмотра логов в Docker:

```bash
docker-compose logs web
docker-compose logs db
```
