Project Path: encore

Source Tree:

```txt
encore
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ booking
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ apps.py
‚îÇ   ‚îú‚îÄ‚îÄ forms.py
‚îÇ   ‚îú‚îÄ‚îÄ migrations
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îú‚îÄ‚îÄ templates
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ booking
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ bookPage.html
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ templatePage.html
‚îÇ   ‚îú‚îÄ‚îÄ tests.py
‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ views.py
‚îú‚îÄ‚îÄ code.txt
‚îú‚îÄ‚îÄ concertsshower
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ apps.py
‚îÇ   ‚îú‚îÄ‚îÄ migrations
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ templates
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ concertsshower
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ all_concerts.html
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ base.html
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ concert_detail.html
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ concert_not_found.html
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ upcoming_concerts.html
‚îÇ   ‚îú‚îÄ‚îÄ tests.py
‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ views.py
‚îú‚îÄ‚îÄ config
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ asgi.py
‚îÇ   ‚îú‚îÄ‚îÄ settings.py
‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ wsgi.py
‚îú‚îÄ‚îÄ core
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ apps.py
‚îÇ   ‚îú‚îÄ‚îÄ forms.py
‚îÇ   ‚îú‚îÄ‚îÄ migrations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 0001_initial.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ models.py
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ manage.py
‚îî‚îÄ‚îÄ requirements.txt

```

`Dockerfile`:

```
FROM python:3.11-slim

WORKDIR /app

ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

RUN apt-get update \
    && apt-get install -y gcc libpq-dev \
    && rm -rf /var/lib/apt/lists/*

COPY requirements.txt .
RUN pip install --upgrade pip \
    && pip install -r requirements.txt

COPY . .

EXPOSE 8000

CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]

```

`booking/admin.py`:

```py
from django.contrib import admin

# Register your models here.

```

`booking/apps.py`:

```py
from django.apps import AppConfig


class BookingConfig(AppConfig):
    name = 'booking'

```

`booking/forms.py`:

```py
# booking/forms.py
from .models import Rehearsals
from django.forms import ModelForm, TextInput, DateTimeInput, NumberInput


class RehearsalsForm(ModelForm):
    class Meta():
        model = Rehearsals
        fields = ["band_id", "rehearsal_date", "duration_minutes", "location"]  # –ò–∑–º–µ–Ω–µ–Ω–æ

        widgets = {            
            "band_id": NumberInput(attrs={
                "class": "form-control",
                "placeholder": "Enter band id"
            }), 
            "rehearsal_date": DateTimeInput(attrs={
                "class": "form-control",
                "placeholder": "Enter date",
                "type": "datetime-local"
            }),
            "duration_minutes": NumberInput(attrs={  # –ò–∑–º–µ–Ω–µ–Ω–æ
                "class": "form-control",
                "placeholder": "Enter duration in minutes"
            }),
            "location": TextInput(attrs={
                "class": "form-control",
                "placeholder": "Enter location"
            })
        }
```

`booking/models.py`:

```py
# booking/models.py
from django.db import models


class Rehearsals(models.Model):
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ –∂–µ –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π, —á—Ç–æ –∏ –≤ core/models.py
    rehearsal_id = models.AutoField(primary_key=True, db_column='rehearsal_id')
    band_id = models.IntegerField("band id")
    rehearsal_date = models.DateTimeField("Date & time")
    duration_minutes = models.IntegerField("Duration minutes")  # –ò–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ duration_minutes
    location = models.CharField("Location", max_length=255)

    class Meta():
        db_table = "rehearsals"
        managed = False

    def __str__(self):
        return f"Rehearsal {self.rehearsal_id} on {self.rehearsal_date}"
    

class Bands(models.Model):
    band_id = models.AutoField(primary_key=True, db_column='band_id')
    band_name = models.CharField("Band name", max_length=100)
    genre = models.CharField("Genre", max_length=50)  # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
    founded_date = models.DateTimeField("Founded")

    class Meta():
        db_table = "bands"
        managed = False

    def __str__(self):
        return self.band_name
    

class Band_membership(models.Model):
    id = models.BigAutoField(primary_key=True)
    band_id = models.IntegerField("Band id")
    musician_id = models.IntegerField("Musician id")
    join_date = models.DateTimeField("Joined")

    class Meta():
        db_table = "band_membership"
        managed = False

    def __str__(self):
        return f"Membership {self.id}"
    

class Musicians(models.Model):
    musician_id = models.AutoField(primary_key=True, db_column='musician_id')
    first_name = models.CharField("First name", max_length=50)
    last_name = models.CharField("Last name", max_length=50)
    phone = models.CharField("Phone", max_length=20)
    telegram = models.CharField("Telegram", max_length=100)
    instrument = models.CharField("Instrument", max_length=100)

    class Meta():
        db_table = "musicians"
        managed = False

    def __str__(self):
        return f"{self.first_name} {self.last_name}"


class Performances(models.Model):
    performance_id = models.AutoField(primary_key=True, db_column='performance_id')
    band_id = models.IntegerField("Band id")
    concert_id = models.IntegerField("Concert id")
    performance_order = models.IntegerField("Performance order")

    class Meta():
        db_table = "performances"
        managed = False

    def __str__(self):
        return f"Performance {self.performance_id}"
    

class Concerts(models.Model):
    concert_id = models.AutoField(primary_key=True, db_column='concert_id')
    concert_title = models.CharField("Title", max_length=200)
    venue_address = models.CharField("Address", max_length=255)
    concert_date = models.DateTimeField("Date")

    class Meta():
        db_table = "concerts"
        managed = False

    def __str__(self):
        return self.concert_title
```

`booking/templates/booking/bookPage.html`:

```html
{% extends "booking/templatePage.html" %}

{% block title %}
–ë—Ä–æ–Ω—å —Ä–µ–ø–µ—Ç–∏—Ü–∏–∏
{% endblock %}

{% block content %}
    <h1 class="mb-4">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–µ—Ç–∏—Ü–∏–∏</h1>
    
    <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π -->
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
    {% endif %}
    
    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5>–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–µ—Ç–∏—Ü–∏—é</h5>
                </div>
                <div class="card-body">
                    <form method="post" action="">
                        {% csrf_token %}
                        
                        <div class="mb-3">
                            <label for="id_band_id" class="form-label">ID –≥—Ä—É–ø–ø—ã</label>
                            {{ form.band_id }}
                        </div>
                        
                        <div class="mb-3">
                            <label for="id_rehearsal_date" class="form-label">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</label>
                            {{ form.rehearsal_date }}
                        </div>
                        
                        <div class="mb-3">
                            <label for="id_duration_minutes" class="form-label">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω—É—Ç—ã)</label>
                            {{ form.duration_minutes }}
                        </div>
                        
                        <div class="mb-3">
                            <label for="id_location" class="form-label">–ú–µ—Å—Ç–æ</label>
                            {{ form.location }}
                        </div>
                        
                        {% if error %}
                            <div class="alert alert-danger">
                                {{ error }}
                            </div>
                        {% endif %}
                        
                        <button type="submit" class="btn btn-primary">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5>–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–ø–µ—Ç–∏—Ü–∏–∏</h5>
                </div>
                <div class="card-body">
                    {% if rehearsals %}
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>ID –≥—Ä—É–ø–ø—ã</th>
                                        <th>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</th>
                                        <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                                        <th>–ú–µ—Å—Ç–æ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for rehearsal in rehearsals %}
                                        <tr>
                                            <td>{{ rehearsal.rehearsal_id }}</td>
                                            <td>{{ rehearsal.band_id }}</td>
                                            <td>{{ rehearsal.rehearsal_date }}</td>
                                            <td>{{ rehearsal.duration_minutes }} –º–∏–Ω.</td>
                                            <td>{{ rehearsal.location }}</td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <p class="text-muted">–ù–µ—Ç –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–ø–µ—Ç–∏—Ü–∏–π</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
```

`booking/templates/booking/templatePage.html`:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/">Encore</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/">–ê–¥–º–∏–Ω–∫–∞</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/book/">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–µ—Ç–∏—Ü–∏–π</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/concerts/upcoming/">–ë–ª–∏–∂–∞–π—à–∏–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/concerts/all/">–í—Å–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <div class="container mt-4">
        {% block content %}{% endblock %}
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
```

`booking/tests.py`:

```py
from django.test import TestCase

# Create your tests here.

```

`booking/urls.py`:

```py
# booking/urls.py
from django.urls import path
from . import views


urlpatterns = [
    path('', views.book, name='book'),  # –î–æ–±–∞–≤—å—Ç–µ name='book'
]
```

`booking/views.py`:

```py
from django.shortcuts import render, redirect
from django.contrib import messages
from django.db import connection
from .models import Rehearsals
from .forms import RehearsalsForm


def book(request):
    error = ""
    try:
        with connection.cursor() as cursor:
            cursor.execute("SELECT column_name FROM information_schema.columns WHERE table_name = 'rehearsals'")
            columns = [row[0] for row in cursor.fetchall()]
            print("Columns in rehearsals table:", columns)
    except Exception as e:
        print(f"Error checking table structure: {e}")
    
    if request.method == "POST":
        form = RehearsalsForm(request.POST)
        if form.is_valid():
            try:
                form.save()
                messages.success(request, "–†–µ–ø–µ—Ç–∏—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∞!")
                return redirect('book')
            except Exception as e:
                error = f"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: {str(e)}"
                messages.error(request, error)
        else:
            error = "–§–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ"
            messages.error(request, error)

    form = RehearsalsForm()
    
    try:
        rehearsals = Rehearsals.objects.all()
    except Exception as e:
        rehearsals = []
        error = f"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: {str(e)}"
        messages.error(request, error)

    data = {
        "form": form,
        "error": error,
        "rehearsals": rehearsals
    }

    return render(request, "booking/bookPage.html", data)
```

`code.txt`:

```txt
Project Path: encore

Source Tree:

```txt
encore
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ booking
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ apps.py
‚îÇ   ‚îú‚îÄ‚îÄ forms.py
‚îÇ   ‚îú‚îÄ‚îÄ migrations
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îú‚îÄ‚îÄ templates
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ booking
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ bookPage.html
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ templatePage.html
‚îÇ   ‚îú‚îÄ‚îÄ tests.py
‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ views.py
‚îú‚îÄ‚îÄ concertsshower
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ apps.py
‚îÇ   ‚îú‚îÄ‚îÄ migrations
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îú‚îÄ‚îÄ templates
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ concertsshower
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ all_concerts.html
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ base.html
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ concert_detail.html
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ concert_not_found.html
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ upcoming_concerts.html
‚îÇ   ‚îú‚îÄ‚îÄ tests.py
‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ views.py
‚îú‚îÄ‚îÄ config
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ asgi.py
‚îÇ   ‚îú‚îÄ‚îÄ settings.py
‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ wsgi.py
‚îú‚îÄ‚îÄ core
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ apps.py
‚îÇ   ‚îú‚îÄ‚îÄ forms.py
‚îÇ   ‚îú‚îÄ‚îÄ migrations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 0001_initial.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ models.py
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ manage.py
‚îî‚îÄ‚îÄ requirements.txt

```

`Dockerfile`:

```
FROM python:3.11-slim

WORKDIR /app

ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

RUN apt-get update \
    && apt-get install -y gcc libpq-dev \
    && rm -rf /var/lib/apt/lists/*

COPY requirements.txt .
RUN pip install --upgrade pip \
    && pip install -r requirements.txt

COPY . .

EXPOSE 8000

CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]

```

`booking/admin.py`:

```py
from django.contrib import admin

# Register your models here.

```

`booking/apps.py`:

```py
from django.apps import AppConfig


class BookingConfig(AppConfig):
    name = 'booking'

```

`booking/forms.py`:

```py
# booking/forms.py
from .models import Rehearsals
from django.forms import ModelForm, TextInput, DateTimeInput, NumberInput


class RehearsalsForm(ModelForm):
    class Meta():
        model = Rehearsals
        fields = ["band_id", "rehearsal_date", "duration_minutes", "location"]  # –ò–∑–º–µ–Ω–µ–Ω–æ

        widgets = {            
            "band_id": NumberInput(attrs={
                "class": "form-control",
                "placeholder": "Enter band id"
            }), 
            "rehearsal_date": DateTimeInput(attrs={
                "class": "form-control",
                "placeholder": "Enter date",
                "type": "datetime-local"
            }),
            "duration_minutes": NumberInput(attrs={  # –ò–∑–º–µ–Ω–µ–Ω–æ
                "class": "form-control",
                "placeholder": "Enter duration in minutes"
            }),
            "location": TextInput(attrs={
                "class": "form-control",
                "placeholder": "Enter location"
            })
        }
```

`booking/models.py`:

```py
# booking/models.py
from django.db import models


class Rehearsals(models.Model):
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ –∂–µ –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π, —á—Ç–æ –∏ –≤ core/models.py
    rehearsal_id = models.AutoField(primary_key=True, db_column='rehearsal_id')
    band_id = models.IntegerField("band id")
    rehearsal_date = models.DateTimeField("Date & time")
    duration_minutes = models.IntegerField("Duration minutes")  # –ò–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ duration_minutes
    location = models.CharField("Location", max_length=255)

    class Meta():
        db_table = "rehearsals"
        managed = False

    def __str__(self):
        return f"Rehearsal {self.rehearsal_id} on {self.rehearsal_date}"
    

class Bands(models.Model):
    band_id = models.AutoField(primary_key=True, db_column='band_id')
    band_name = models.CharField("Band name", max_length=100)
    genre = models.CharField("Genre", max_length=50)  # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
    founded_date = models.DateTimeField("Founded")

    class Meta():
        db_table = "bands"
        managed = False

    def __str__(self):
        return self.band_name
    

class Band_membership(models.Model):
    id = models.BigAutoField(primary_key=True)
    band_id = models.IntegerField("Band id")
    musician_id = models.IntegerField("Musician id")
    join_date = models.DateTimeField("Joined")

    class Meta():
        db_table = "band_membership"
        managed = False

    def __str__(self):
        return f"Membership {self.id}"
    

class Musicians(models.Model):
    musician_id = models.AutoField(primary_key=True, db_column='musician_id')
    first_name = models.CharField("First name", max_length=50)
    last_name = models.CharField("Last name", max_length=50)
    phone = models.CharField("Phone", max_length=20)
    telegram = models.CharField("Telegram", max_length=100)
    instrument = models.CharField("Instrument", max_length=100)

    class Meta():
        db_table = "musicians"
        managed = False

    def __str__(self):
        return f"{self.first_name} {self.last_name}"


class Performances(models.Model):
    performance_id = models.AutoField(primary_key=True, db_column='performance_id')
    band_id = models.IntegerField("Band id")
    concert_id = models.IntegerField("Concert id")
    performance_order = models.IntegerField("Performance order")

    class Meta():
        db_table = "performances"
        managed = False

    def __str__(self):
        return f"Performance {self.performance_id}"
    

class Concerts(models.Model):
    concert_id = models.AutoField(primary_key=True, db_column='concert_id')
    concert_title = models.CharField("Title", max_length=200)
    venue_address = models.CharField("Address", max_length=255)
    concert_date = models.DateTimeField("Date")

    class Meta():
        db_table = "concerts"
        managed = False

    def __str__(self):
        return self.concert_title
```

`booking/templates/booking/bookPage.html`:

```html
{% extends "booking/templatePage.html" %}

{% block title %}
–ë—Ä–æ–Ω—å —Ä–µ–ø–µ—Ç–∏—Ü–∏–∏
{% endblock %}

{% block content %}
    <h1 class="mb-4">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–µ—Ç–∏—Ü–∏–∏</h1>
    
    <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π -->
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
    {% endif %}
    
    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5>–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–µ—Ç–∏—Ü–∏—é</h5>
                </div>
                <div class="card-body">
                    <form method="post" action="">
                        {% csrf_token %}
                        
                        <div class="mb-3">
                            <label for="id_band_id" class="form-label">ID –≥—Ä—É–ø–ø—ã</label>
                            {{ form.band_id }}
                        </div>
                        
                        <div class="mb-3">
                            <label for="id_rehearsal_date" class="form-label">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</label>
                            {{ form.rehearsal_date }}
                        </div>
                        
                        <div class="mb-3">
                            <label for="id_duration_minutes" class="form-label">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω—É—Ç—ã)</label>
                            {{ form.duration_minutes }}
                        </div>
                        
                        <div class="mb-3">
                            <label for="id_location" class="form-label">–ú–µ—Å—Ç–æ</label>
                            {{ form.location }}
                        </div>
                        
                        {% if error %}
                            <div class="alert alert-danger">
                                {{ error }}
                            </div>
                        {% endif %}
                        
                        <button type="submit" class="btn btn-primary">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5>–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–ø–µ—Ç–∏—Ü–∏–∏</h5>
                </div>
                <div class="card-body">
                    {% if rehearsals %}
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>ID –≥—Ä—É–ø–ø—ã</th>
                                        <th>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</th>
                                        <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                                        <th>–ú–µ—Å—Ç–æ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for rehearsal in rehearsals %}
                                        <tr>
                                            <td>{{ rehearsal.rehearsal_id }}</td>
                                            <td>{{ rehearsal.band_id }}</td>
                                            <td>{{ rehearsal.rehearsal_date }}</td>
                                            <td>{{ rehearsal.duration_minutes }} –º–∏–Ω.</td>
                                            <td>{{ rehearsal.location }}</td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <p class="text-muted">–ù–µ—Ç –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–ø–µ—Ç–∏—Ü–∏–π</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
```

`booking/templates/booking/templatePage.html`:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/">Encore</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/">–ê–¥–º–∏–Ω–∫–∞</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/book/">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <div class="container mt-4">
        {% block content %}{% endblock %}
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
```

`booking/tests.py`:

```py
from django.test import TestCase

# Create your tests here.

```

`booking/urls.py`:

```py
# booking/urls.py
from django.urls import path
from . import views


urlpatterns = [
    path('', views.book, name='book'),  # –î–æ–±–∞–≤—å—Ç–µ name='book'
]
```

`booking/views.py`:

```py
# booking/views.py
from django.shortcuts import render, redirect
from django.contrib import messages
from django.db import connection  # –î–æ–±–∞–≤—å—Ç–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
from .models import Rehearsals
from .forms import RehearsalsForm


def book(request):
    error = ""
    
    # –î–ª—è –æ—Ç–ª–∞–¥–∫–∏: –ø–æ—Å–º–æ—Ç—Ä–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
    try:
        with connection.cursor() as cursor:
            cursor.execute("SELECT column_name FROM information_schema.columns WHERE table_name = 'rehearsals'")
            columns = [row[0] for row in cursor.fetchall()]
            print("Columns in rehearsals table:", columns)  # –î–ª—è –æ—Ç–ª–∞–¥–∫–∏
    except Exception as e:
        print(f"Error checking table structure: {e}")
    
    if request.method == "POST":
        form = RehearsalsForm(request.POST)
        if form.is_valid():
            try:
                form.save()
                messages.success(request, "–†–µ–ø–µ—Ç–∏—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∞!")
                return redirect('book')
            except Exception as e:
                error = f"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: {str(e)}"
                messages.error(request, error)
        else:
            error = "–§–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ"
            messages.error(request, error)

    form = RehearsalsForm()
    
    # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Ä–µ–ø–µ—Ç–∏—Ü–∏–π
    try:
        rehearsals = Rehearsals.objects.all()
    except Exception as e:
        rehearsals = []
        error = f"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: {str(e)}"
        messages.error(request, error)

    data = {
        "form": form,
        "error": error,
        "rehearsals": rehearsals
    }

    return render(request, "booking/bookPage.html", data)
```

`concertsshower/admin.py`:

```py
from django.contrib import admin

# Register your models here.

```

`concertsshower/apps.py`:

```py
from django.apps import AppConfig

class ConcertsshowerConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'concertsshower'
```

`concertsshower/models.py`:

```py
from django.db import models
from django.utils import timezone

class Musician(models.Model):
    musician_id = models.AutoField(primary_key=True)
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    phone = models.CharField(max_length=20, blank=True, null=True)
    telegram = models.CharField(max_length=100, blank=True, null=True)
    instrument = models.CharField(max_length=50, blank=True, null=True)

    class Meta:
        db_table = 'musicians'
        managed = False  # –ù–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É, –æ–Ω–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

    def __str__(self):
        return f"{self.first_name} {self.last_name}"


class Band(models.Model):
    band_id = models.AutoField(primary_key=True)
    band_name = models.CharField(max_length=100)
    genre = models.CharField(max_length=50, blank=True, null=True)
    founded_date = models.DateField(blank=True, null=True)

    class Meta:
        db_table = 'bands'
        managed = False

    def __str__(self):
        return self.band_name


class Concert(models.Model):
    concert_id = models.AutoField(primary_key=True)
    concert_title = models.CharField(max_length=200)
    venue_address = models.CharField(max_length=255)
    concert_date = models.DateTimeField()

    class Meta:
        db_table = 'concerts'
        managed = False
        ordering = ['concert_date']

    def __str__(self):
        return self.concert_title
    
    def is_upcoming(self):
        return self.concert_date > timezone.now()


class Performance(models.Model):
    performance_id = models.AutoField(primary_key=True)
    band = models.ForeignKey(Band, on_delete=models.CASCADE, db_column='band_id')
    concert = models.ForeignKey(Concert, on_delete=models.CASCADE, db_column='concert_id')
    performance_order = models.IntegerField()

    class Meta:
        db_table = 'performances'
        managed = False


class BandMembership(models.Model):
    band = models.ForeignKey(Band, on_delete=models.CASCADE, db_column='band_id')
    musician = models.ForeignKey(Musician, on_delete=models.CASCADE, db_column='musician_id')
    join_date = models.DateField()

    class Meta:
        db_table = 'band_membership'
        managed = False
        unique_together = ('band', 'musician')


class Rehearsal(models.Model):
    rehearsal_id = models.AutoField(primary_key=True)
    band = models.ForeignKey(Band, on_delete=models.CASCADE, db_column='band_id')
    rehearsal_date = models.DateTimeField()
    duration_minutes = models.IntegerField()
    location = models.CharField(max_length=255)

    class Meta:
        db_table = 'rehearsals'
        managed = False
```

`concertsshower/templates/concertsshower/all_concerts.html`:

```html
{% extends 'concertsshower/base.html' %}

{% block title %}–í—Å–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã{% endblock %}

{% block content %}
<h1>–í—Å–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã</h1>

<div class="search-form">
    <form method="get">
        <input type="text" name="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é" value="{{ search_query }}">
        <input type="date" name="from_date" placeholder="–° –¥–∞—Ç—ã">
        <input type="date" name="to_date" placeholder="–ü–æ –¥–∞—Ç—É">
        <button type="submit">–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å</button>
        <a href="{% url 'concertsshower:all_concerts' %}">–°–±—Ä–æ—Å–∏—Ç—å</a>
    </form>
</div>

{% if concerts %}
    <div class="concert-list">
        {% for concert in concerts %}
        <div class="concert-card">
            <h3>
                <a href="{% url 'concertsshower:concert_detail' concert.concert_id %}">
                    {{ concert.concert_title }}
                </a>
            </h3>
            <div class="concert-date">
                üìÖ {{ concert.concert_date|date:"d.m.Y" }}
                ‚è∞ {{ concert.concert_date|time:"H:i" }}
            </div>
            <div class="concert-venue">
                üìç {{ concert.venue_address }}
            </div>
        </div>
        {% endfor %}
    </div>
{% else %}
    <p>–ö–æ–Ω—Ü–µ—Ä—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>
{% endif %}
{% endblock %}
```

`concertsshower/templates/concertsshower/base.html`:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã{% endblock %}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .concert-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .concert-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background-color: white;
        }
        .concert-card h3 {
            margin-top: 0;
            color: #333;
        }
        .concert-date {
            color: #666;
            font-size: 14px;
        }
        .concert-venue {
            color: #444;
            margin: 10px 0;
        }
        .bands-list {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed #eee;
        }
        .band-tag {
            display: inline-block;
            background-color: #e9ecef;
            padding: 4px 8px;
            border-radius: 4px;
            margin-right: 5px;
            margin-bottom: 5px;
            font-size: 12px;
        }
        .nav-links {
            margin-bottom: 20px;
        }
        .nav-links a {
            margin-right: 15px;
            text-decoration: none;
            color: #007bff;
        }
        .search-form {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav-links">
            <a href="{% url 'concertsshower:upcoming_concerts' %}">–ë–ª–∏–∂–∞–π—à–∏–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã</a>
            <a href="{% url 'concertsshower:all_concerts' %}">–í—Å–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã</a>
        </div>
        
        {% block content %}{% endblock %}
    </div>
</body>
</html>
```

`concertsshower/templates/concertsshower/concert_detail.html`:

```html
{% extends 'concertsshower/base.html' %}

{% block title %}{{ concert.concert_title }}{% endblock %}

{% block content %}
<h1>{{ concert.concert_title }}</h1>
<div class="concert-date">
    üìÖ {{ concert.concert_date|date:"d.m.Y" }}
    ‚è∞ {{ concert.concert_date|time:"H:i" }}
</div>
<div class="concert-venue">
    üìç {{ concert.venue_address }}
</div>

{% if performances %}
<h2>–ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–π:</h2>
<ol>
    {% for performance in performances %}
    <li>
        <strong>{{ performance.band.band_name }}</strong>
        {% if performance.band.genre %}
        ({{ performance.band.genre }})
        {% endif %}
    </li>
    {% endfor %}
</ol>
{% else %}
<p>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.</p>
{% endif %}

<a href="{% url 'concertsshower:upcoming_concerts' %}">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –∫–æ–Ω—Ü–µ—Ä—Ç–æ–≤</a>
{% endblock %}
```

`concertsshower/templates/concertsshower/concert_not_found.html`:

```html
{% extends 'concertsshower/base.html' %}

{% block title %}–ö–æ–Ω—Ü–µ—Ä—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω{% endblock %}

{% block content %}
<h1>–ö–æ–Ω—Ü–µ—Ä—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω</h1>
<p>–ó–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–π –∫–æ–Ω—Ü–µ—Ä—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –±—ã–ª —É–¥–∞–ª–µ–Ω.</p>
<a href="{% url 'concertsshower:upcoming_concerts' %}">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –∫–æ–Ω—Ü–µ—Ä—Ç–æ–≤</a>
{% endblock %}
```

`concertsshower/templates/concertsshower/upcoming_concerts.html`:

```html
{% extends 'concertsshower/base.html' %}

{% block title %}–ë–ª–∏–∂–∞–π—à–∏–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã{% endblock %}

{% block content %}
<h1>–ë–ª–∏–∂–∞–π—à–∏–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã</h1>
<p class="concert-date">–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è: {{ current_time|date:"d.m.Y H:i" }}</p>

{% if concerts_with_bands %}
    <div class="concert-list">
        {% for item in concerts_with_bands %}
        <div class="concert-card">
            <h3>
                <a href="{% url 'concertsshower:concert_detail' item.concert.concert_id %}">
                    {{ item.concert.concert_title }}
                </a>
            </h3>
            <div class="concert-date">
                üìÖ {{ item.concert.concert_date|date:"d.m.Y" }}
                ‚è∞ {{ item.concert.concert_date|time:"H:i" }}
            </div>
            <div class="concert-venue">
                üìç {{ item.concert.venue_address }}
            </div>
            
            {% if item.bands %}
            <div class="bands-list">
                <strong>–£—á–∞—Å—Ç–Ω–∏–∫–∏ ({{ item.performance_count }}):</strong>
                <div>
                    {% for band in item.bands %}
                    <span class="band-tag">{{ band.band_name }}</span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
{% else %}
    <p>–ù–∞ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è –∫–æ–Ω—Ü–µ—Ä—Ç–æ–≤ –Ω–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ.</p>
{% endif %}
{% endblock %}
```

`concertsshower/tests.py`:

```py
from django.test import TestCase

# Create your tests here.

```

`concertsshower/urls.py`:

```py
from django.urls import path
from . import views

app_name = 'concertsshower'

urlpatterns = [
    path('upcoming/', views.upcoming_concerts, name='upcoming_concerts'),
    path('all/', views.all_concerts, name='all_concerts'),
    path('concert/<int:concert_id>/', views.concert_detail, name='concert_detail'),
]
```

`concertsshower/views.py`:

```py
from django.shortcuts import render
from django.utils import timezone
from django.db.models import Prefetch
from .models import Concert, Performance, Band

def upcoming_concerts(request):
    now = timezone.now()
    

    concerts = Concert.objects.filter(
        concert_date__gte=now
    ).order_by('concert_date')[:10]  
    
    concerts_with_bands = []
    for concert in concerts:
        performances = Performance.objects.filter(concert=concert).select_related('band')
        bands = [performance.band for performance in performances]
        concerts_with_bands.append({
            'concert': concert,
            'bands': bands,
            'performance_count': len(bands)
        })
    
    context = {
        'concerts_with_bands': concerts_with_bands,
        'current_time': now,
    }
    
    return render(request, 'concertsshower/upcoming_concerts.html', context)


def concert_detail(request, concert_id):
    try:
        concert = Concert.objects.get(concert_id=concert_id)
        performances = Performance.objects.filter(
            concert=concert
        ).select_related('band').order_by('performance_order')
        
        context = {
            'concert': concert,
            'performances': performances,
        }
        
        return render(request, 'concertsshower/concert_detail.html', context)
    except Concert.DoesNotExist:
        return render(request, 'concertsshower/concert_not_found.html', status=404)


def all_concerts(request):
    from_date = request.GET.get('from_date')
    to_date = request.GET.get('to_date')
    search_query = request.GET.get('search', '')
    
    concerts = Concert.objects.all()
    
    if from_date:
        concerts = concerts.filter(concert_date__gte=from_date)
    if to_date:
        concerts = concerts.filter(concert_date__lte=to_date)
    if search_query:
        concerts = concerts.filter(concert_title__icontains=search_query)
    
    concerts = concerts.order_by('concert_date')
    
    context = {
        'concerts': concerts,
        'search_query': search_query,
    }
    
    return render(request, 'concertsshower/all_concerts.html', context)
```

`config/asgi.py`:

```py
"""
ASGI config for config project.
"""

import os
from django.core.asgi import get_asgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')

application = get_asgi_application()

```

`config/settings.py`:

```py
"""
Django settings for config project.
"""

import os
from pathlib import Path

BASE_DIR = Path(__file__).resolve().parent.parent

SECRET_KEY = os.environ.get('SECRET_KEY', 'django-insecure-dev-key')
DEBUG = True
ALLOWED_HOSTS = ['*']

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'core.apps.CoreConfig',  
    'booking.apps.BookingConfig'
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'config.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'config.wsgi.application'

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'concerts_and_rehearsals',
        'USER': 'postgres',
        'PASSWORD': 'postgres',
        'HOST': 'db',
        'PORT': '5432',
    }
}

AUTH_PASSWORD_VALIDATORS = []

LANGUAGE_CODE = 'en-us'
TIME_ZONE = 'UTC'
USE_I18N = True
USE_TZ = True

STATIC_URL = 'static/'
DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

```

`config/urls.py`:

```py
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('book/', include('booking.urls')),
]
```

`config/wsgi.py`:

```py
"""
WSGI config for config project.
"""

import os
from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')

application = get_wsgi_application()

```

`core/admin.py`:

```py
from django.contrib import admin
from .models import Musician, Band, Concert, Performance, Rehearsal, BandMembership


@admin.register(Musician)
class MusicianAdmin(admin.ModelAdmin):
    list_display = ('first_name', 'last_name', 'phone', 'instrument', 'telegram')
    list_filter = ('instrument',)
    search_fields = ('first_name', 'last_name', 'phone', 'instrument')


@admin.register(Band)
class BandAdmin(admin.ModelAdmin):
    list_display = ('band_name', 'genre', 'founded_date')
    list_filter = ('genre', 'founded_date')
    search_fields = ('band_name', 'genre')


@admin.register(Concert)
class ConcertAdmin(admin.ModelAdmin):
    list_display = ('concert_title', 'venue_address', 'concert_date')
    list_filter = ('concert_date',)
    search_fields = ('concert_title', 'venue_address')
    date_hierarchy = 'concert_date'


@admin.register(Performance)
class PerformanceAdmin(admin.ModelAdmin):
    list_display = ('concert', 'band', 'performance_order')
    list_filter = ('concert', 'band')
    autocomplete_fields = ['concert', 'band']


@admin.register(Rehearsal)
class RehearsalAdmin(admin.ModelAdmin):
    list_display = ('band', 'rehearsal_date', 'duration_minutes', 'location')
    list_filter = ('band', 'rehearsal_date')
    search_fields = ('location', 'band__band_name')
    date_hierarchy = 'rehearsal_date'


@admin.register(BandMembership)
class BandMembershipAdmin(admin.ModelAdmin):
    list_display = ('musician', 'band', 'join_date')
    list_filter = ('band', 'join_date')
    search_fields = ('musician__first_name', 'musician__last_name', 'band__band_name')
    autocomplete_fields = ['musician', 'band']

```

`core/apps.py`:

```py
from django.apps import AppConfig


class CoreConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'core'

```

`core/forms.py`:

```py
from django import forms
from django.core.exceptions import ValidationError
from django.utils import timezone
from .models import Musician, Band, Concert, BandMembership


class MusicianForm(forms.ModelForm):
    class Meta:
        model = Musician
        fields = '__all__'
    
    def clean_phone(self):
        phone = self.cleaned_data.get('phone')
        if not phone.startswith('+375'):
            raise ValidationError('Phone must start with +375')
        if len(phone) != 13:  # +375 + 9 digits
            raise ValidationError('Phone must be 13 characters long')
        return phone
    
    def clean_telegram(self):
        telegram = self.cleaned_data.get('telegram')
        if telegram and not telegram.startswith('@'):
            raise ValidationError('Telegram username must start with @')
        return telegram


class BandForm(forms.ModelForm):
    class Meta:
        model = Band
        fields = '__all__'
        widgets = {
            'founded_date': forms.DateInput(attrs={'type': 'date'}),
        }
    
    def clean_founded_date(self):
        founded_date = self.cleaned_data.get('founded_date')
        if founded_date > timezone.now().date():
            raise ValidationError('Founded date cannot be in the future')
        return founded_date


class ConcertForm(forms.ModelForm):
    class Meta:
        model = Concert
        fields = '__all__'
        widgets = {
            'concert_date': forms.DateTimeInput(attrs={'type': 'datetime-local'}),
        }
    
    def clean_concert_date(self):
        concert_date = self.cleaned_data.get('concert_date')
        if concert_date < timezone.now():
            raise ValidationError('Concert date cannot be in the past')
        return concert_date


class BandMembershipForm(forms.ModelForm):
    class Meta:
        model = BandMembership
        fields = '__all__'
        widgets = {
            'join_date': forms.DateInput(attrs={'type': 'date'}),
        }
    
    def clean_join_date(self):
        join_date = self.cleaned_data.get('join_date')
        if join_date > timezone.now().date():
            raise ValidationError('Join date cannot be in the future')
        return join_date

```

`core/migrations/0001_initial.py`:

```py
# Generated by Django 5.0.3 on 2025-12-16 07:49

import django.core.validators
import django.db.models.deletion
import django.utils.timezone
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Band',
            fields=[
                ('band_id', models.AutoField(primary_key=True, serialize=False)),
                ('band_name', models.CharField(max_length=100)),
                ('genre', models.CharField(choices=[('rock', 'Rock'), ('pop', 'Pop'), ('jazz', 'Jazz'), ('blues', 'Blues'), ('classical', 'Classical'), ('electronic', 'Electronic'), ('folk', 'Folk'), ('metal', 'Metal'), ('punk', 'Punk'), ('reggae', 'Reggae'), ('hip-hop', 'Hip-Hop'), ('country', 'Country'), ('funk', 'Funk'), ('soul', 'Soul'), ('r&b', 'R&B'), ('alternative', 'Alternative'), ('indie', 'Indie'), ('hard_rock', 'Hard Rock'), ('progressive', 'Progressive'), ('house', 'House'), ('techno', 'Techno')], max_length=50)),
                ('founded_date', models.DateField(default=django.utils.timezone.now)),
            ],
            options={
                'db_table': 'bands',
            },
        ),
        migrations.CreateModel(
            name='Concert',
            fields=[
                ('concert_id', models.AutoField(primary_key=True, serialize=False)),
                ('concert_title', models.CharField(max_length=200)),
                ('venue_address', models.CharField(max_length=255)),
                ('concert_date', models.DateTimeField(default=django.utils.timezone.now)),
            ],
            options={
                'db_table': 'concerts',
            },
        ),
        migrations.CreateModel(
            name='Musician',
            fields=[
                ('musician_id', models.AutoField(primary_key=True, serialize=False)),
                ('first_name', models.CharField(max_length=50)),
                ('last_name', models.CharField(max_length=50)),
                ('phone', models.CharField(max_length=20, unique=True, validators=[django.core.validators.RegexValidator(message='Phone must be in format +375XXXXXXXXX', regex='^\\+375[0-9]{9}$')])),
                ('telegram', models.CharField(blank=True, max_length=100, null=True, validators=[django.core.validators.RegexValidator(message='Telegram must start with @', regex='^@.+')])),
                ('instrument', models.CharField(choices=[('guitar', 'Guitar'), ('bass', 'Bass'), ('drums', 'Drums'), ('keyboards', 'Keyboards'), ('piano', 'Piano'), ('vocals', 'Vocals'), ('violin', 'Violin'), ('cello', 'Cello'), ('trumpet', 'Trumpet'), ('saxophone', 'Saxophone'), ('trombone', 'Trombone'), ('flute', 'Flute'), ('clarinet', 'Clarinet'), ('accordion', 'Accordion'), ('harp', 'Harp')], max_length=50)),
            ],
            options={
                'db_table': 'musicians',
            },
        ),
        migrations.CreateModel(
            name='Performance',
            fields=[
                ('performance_id', models.AutoField(primary_key=True, serialize=False)),
                ('performance_order', models.PositiveIntegerField()),
                ('band', models.ForeignKey(db_column='band_id', on_delete=django.db.models.deletion.CASCADE, to='core.band')),
                ('concert', models.ForeignKey(db_column='concert_id', on_delete=django.db.models.deletion.CASCADE, to='core.concert')),
            ],
            options={
                'db_table': 'performances',
            },
        ),
        migrations.CreateModel(
            name='Rehearsal',
            fields=[
                ('rehearsal_id', models.AutoField(primary_key=True, serialize=False)),
                ('rehearsal_date', models.DateTimeField(default=django.utils.timezone.now)),
                ('duration_minutes', models.PositiveIntegerField()),
                ('location', models.CharField(max_length=255)),
                ('band', models.ForeignKey(db_column='band_id', on_delete=django.db.models.deletion.CASCADE, to='core.band')),
            ],
            options={
                'db_table': 'rehearsals',
            },
        ),
        migrations.CreateModel(
            name='BandMembership',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('join_date', models.DateField(default=django.utils.timezone.now)),
                ('band', models.ForeignKey(db_column='band_id', on_delete=django.db.models.deletion.CASCADE, to='core.band')),
                ('musician', models.ForeignKey(db_column='musician_id', on_delete=django.db.models.deletion.CASCADE, to='core.musician')),
            ],
            options={
                'db_table': 'band_membership',
                'unique_together': {('band', 'musician')},
            },
        ),
    ]

```

`core/models.py`:

```py
from django.db import models
from django.core.validators import RegexValidator
from django.utils import timezone


class Musician(models.Model):
    INSTRUMENT_CHOICES = [
        ('guitar', 'Guitar'),
        ('bass', 'Bass'),
        ('drums', 'Drums'),
        ('keyboards', 'Keyboards'),
        ('piano', 'Piano'),
        ('vocals', 'Vocals'),
        ('violin', 'Violin'),
        ('cello', 'Cello'),
        ('trumpet', 'Trumpet'),
        ('saxophone', 'Saxophone'),
        ('trombone', 'Trombone'),
        ('flute', 'Flute'),
        ('clarinet', 'Clarinet'),
        ('accordion', 'Accordion'),
        ('harp', 'Harp'),
    ]
    
    musician_id = models.AutoField(primary_key=True)
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    phone = models.CharField(
        max_length=20,
        unique=True,
        validators=[
            RegexValidator(
                regex=r'^\+375[0-9]{9}$',
                message='Phone must be in format +375XXXXXXXXX'
            )
        ]
    )
    telegram = models.CharField(
        max_length=100,
        blank=True,
        null=True,
        validators=[
            RegexValidator(
                regex=r'^@.+',
                message='Telegram must start with @'
            )
        ]
    )
    instrument = models.CharField(max_length=50, choices=INSTRUMENT_CHOICES)
    
    class Meta:
        db_table = 'musicians'
    
    def __str__(self):
        return f"{self.first_name} {self.last_name} ({self.instrument})"


class Band(models.Model):
    GENRE_CHOICES = [
        ('rock', 'Rock'),
        ('pop', 'Pop'),
        ('jazz', 'Jazz'),
        ('blues', 'Blues'),
        ('classical', 'Classical'),
        ('electronic', 'Electronic'),
        ('folk', 'Folk'),
        ('metal', 'Metal'),
        ('punk', 'Punk'),
        ('reggae', 'Reggae'),
        ('hip-hop', 'Hip-Hop'),
        ('country', 'Country'),
        ('funk', 'Funk'),
        ('soul', 'Soul'),
        ('r&b', 'R&B'),
        ('alternative', 'Alternative'),
        ('indie', 'Indie'),
        ('hard_rock', 'Hard Rock'),
        ('progressive', 'Progressive'),
        ('house', 'House'),
        ('techno', 'Techno'),
    ]
    
    band_id = models.AutoField(primary_key=True)
    band_name = models.CharField(max_length=100)
    genre = models.CharField(max_length=50, choices=GENRE_CHOICES)
    founded_date = models.DateField(default=timezone.now)
    
    class Meta:
        db_table = 'bands'
    
    def __str__(self):
        return f"{self.band_name} ({self.genre})"


class Concert(models.Model):
    concert_id = models.AutoField(primary_key=True)
    concert_title = models.CharField(max_length=200)
    venue_address = models.CharField(max_length=255)
    concert_date = models.DateTimeField(default=timezone.now)
    
    class Meta:
        db_table = 'concerts'
    
    def __str__(self):
        return f"{self.concert_title} at {self.venue_address}"


class Performance(models.Model):
    performance_id = models.AutoField(primary_key=True)
    band = models.ForeignKey(Band, on_delete=models.CASCADE, db_column='band_id')
    concert = models.ForeignKey(Concert, on_delete=models.CASCADE, db_column='concert_id')
    performance_order = models.PositiveIntegerField()
    
    class Meta:
        db_table = 'performances'
    
    def __str__(self):
        return f"{self.band} at {self.concert} (order: {self.performance_order})"


class Rehearsal(models.Model):
    rehearsal_id = models.AutoField(primary_key=True)
    band = models.ForeignKey(Band, on_delete=models.CASCADE, db_column='band_id')
    rehearsal_date = models.DateTimeField(default=timezone.now)
    duration_minutes = models.PositiveIntegerField()
    location = models.CharField(max_length=255)
    
    class Meta:
        db_table = 'rehearsals'
    
    def __str__(self):
        return f"{self.band} rehearsal at {self.location}"


class BandMembership(models.Model):
    band = models.ForeignKey(Band, on_delete=models.CASCADE, db_column='band_id')
    musician = models.ForeignKey(Musician, on_delete=models.CASCADE, db_column='musician_id')
    join_date = models.DateField(default=timezone.now)
    
    class Meta:
        db_table = 'band_membership'
        unique_together = ('band', 'musician')
    
    def __str__(self):
        return f"{self.musician} in {self.band} since {self.join_date}"

```

`docker-compose.yml`:

```yml
services:
  db:
    image: postgres:15
    environment:
      POSTGRES_DB: concerts_db
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
    ports:
      - "5433:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 10s
      timeout: 5s
      retries: 5

  web:
    build: .
    volumes:
      - .:/app
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=postgres://postgres:postgres@db:5432/concerts_db
      - SECRET_KEY=django-insecure-test-key-12345
      - DEBUG=1
    depends_on:
      db:
        condition: service_healthy

volumes:
  postgres_data:

```

`manage.py`:

```py
"""Django's command-line utility for administrative tasks."""
import os
import sys

def main():
    """Run administrative tasks."""
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed and "
            "available on your PYTHONPATH environment variable? Did you "
            "forget to activate a virtual environment?"
        ) from exc
    execute_from_command_line(sys.argv)

if __name__ == '__main__':
    main()

```

`requirements.txt`:

```txt
asgiref==3.11.0
Django==5.2.9
psycopg2-binary==2.9.11
sqlparse==0.5.4

```
```

`concertsshower/admin.py`:

```py
from django.contrib import admin

# Register your models here.

```

`concertsshower/apps.py`:

```py
from django.apps import AppConfig

class ConcertsshowerConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'concertsshower'
```

`concertsshower/templates/concertsshower/all_concerts.html`:

```html
{% extends 'concertsshower/base.html' %}

{% block title %}–í—Å–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mb-4">–í—Å–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã</h1>

    <div class="search-form card mb-4">
        <div class="card-body">
            <form method="get" class="row g-3">
                <div class="col-md-4">
                    <input type="text" class="form-control" name="search" 
                           placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é" value="{{ search_query }}">
                </div>
                <div class="col-md-3">
                    <input type="date" class="form-control" name="from_date" 
                           placeholder="–° –¥–∞—Ç—ã">
                </div>
                <div class="col-md-3">
                    <input type="date" class="form-control" name="to_date" 
                           placeholder="–ü–æ –¥–∞—Ç—É">
                </div>
                <div class="col-md-2">
                    <button type="submit" class="btn btn-primary w-100">–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å</button>
                </div>
                <div class="col-md-12">
                    <a href="{% url 'concertsshower:all_concerts' %}" class="btn btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</a>
                </div>
            </form>
        </div>
    </div>

    {% if concerts %}
        <div class="concert-list">
            {% for concert in concerts %}
            <div class="concert-card">
                <h3 class="h5">
                    <a href="{% url 'concertsshower:concert_detail' concert.concert_id %}" 
                       class="text-decoration-none text-dark">
                        {{ concert.concert_title }}
                    </a>
                </h3>
                <div class="concert-date mb-2">
                    <i class="bi bi-calendar"></i> {{ concert.concert_date|date:"d.m.Y" }}
                    <i class="bi bi-clock ms-2"></i> {{ concert.concert_date|time:"H:i" }}
                </div>
                <div class="concert-venue mb-3">
                    <i class="bi bi-geo-alt"></i> {{ concert.venue_address }}
                </div>
                <a href="{% url 'concertsshower:concert_detail' concert.concert_id %}" 
                   class="btn btn-sm btn-outline-primary">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info">
            –ö–æ–Ω—Ü–µ—Ä—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.
        </div>
    {% endif %}
</div>
{% endblock %}
```

`concertsshower/templates/concertsshower/base.html`:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .concert-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .concert-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background-color: white;
            transition: transform 0.2s;
        }
        .concert-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .concert-card h3 {
            margin-top: 0;
            color: #333;
        }
        .concert-date {
            color: #666;
            font-size: 14px;
        }
        .concert-venue {
            color: #444;
            margin: 10px 0;
        }
        .bands-list {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed #eee;
        }
        .band-tag {
            display: inline-block;
            background-color: #e9ecef;
            padding: 4px 8px;
            border-radius: 4px;
            margin-right: 5px;
            margin-bottom: 5px;
            font-size: 12px;
        }
        .search-form {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
        .search-form input,
        .search-form button {
            margin-right: 10px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
        <div class="container">
            <a class="navbar-brand" href="/">Encore</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/">–ê–¥–º–∏–Ω–∫–∞</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/book/">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–µ—Ç–∏—Ü–∏–π</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'concertsshower:upcoming_concerts' %}">–ë–ª–∏–∂–∞–π—à–∏–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'concertsshower:all_concerts' %}">–í—Å–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <div class="container">
        {% block content %}{% endblock %}
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
```

`concertsshower/templates/concertsshower/concert_detail.html`:

```html
{% extends 'concertsshower/base.html' %}

{% block title %}{{ concert.concert_title }}{% endblock %}

{% block content %}
<h1>{{ concert.concert_title }}</h1>
<div class="concert-date">
    üìÖ {{ concert.concert_date|date:"d.m.Y" }}
    ‚è∞ {{ concert.concert_date|time:"H:i" }}
</div>
<div class="concert-venue">
    üìç {{ concert.venue_address }}
</div>

{% if performances %}
<h2>–ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–π:</h2>
<ol>
    {% for performance in performances %}
    <li>
        <strong>{{ performance.band.band_name }}</strong>
        {% if performance.band.genre %}
        ({{ performance.band.genre }})
        {% endif %}
    </li>
    {% endfor %}
</ol>
{% else %}
<p>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.</p>
{% endif %}

<a href="{% url 'concertsshower:upcoming_concerts' %}">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –∫–æ–Ω—Ü–µ—Ä—Ç–æ–≤</a>
{% endblock %}
```

`concertsshower/templates/concertsshower/concert_not_found.html`:

```html
{% extends 'concertsshower/base.html' %}

{% block title %}–ö–æ–Ω—Ü–µ—Ä—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω{% endblock %}

{% block content %}
<h1>–ö–æ–Ω—Ü–µ—Ä—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω</h1>
<p>–ó–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–π –∫–æ–Ω—Ü–µ—Ä—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –±—ã–ª —É–¥–∞–ª–µ–Ω.</p>
<a href="{% url 'concertsshower:upcoming_concerts' %}">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –∫–æ–Ω—Ü–µ—Ä—Ç–æ–≤</a>
{% endblock %}
```

`concertsshower/templates/concertsshower/upcoming_concerts.html`:

```html
{% extends 'concertsshower/base.html' %}

{% block title %}–ë–ª–∏–∂–∞–π—à–∏–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã{% endblock %}

{% block content %}
<h1>–ë–ª–∏–∂–∞–π—à–∏–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã</h1>
<p class="concert-date">–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è: {{ current_time|date:"d.m.Y H:i" }}</p>

{% if concerts_with_bands %}
    <div class="concert-list">
        {% for item in concerts_with_bands %}
        <div class="concert-card">
            <h3>
                <a href="{% url 'concertsshower:concert_detail' item.concert.concert_id %}">
                    {{ item.concert.concert_title }}
                </a>
            </h3>
            <div class="concert-date">
                üìÖ {{ item.concert.concert_date|date:"d.m.Y" }}
                ‚è∞ {{ item.concert.concert_date|time:"H:i" }}
            </div>
            <div class="concert-venue">
                üìç {{ item.concert.venue_address }}
            </div>
            
            {% if item.bands %}
            <div class="bands-list">
                <strong>–£—á–∞—Å—Ç–Ω–∏–∫–∏ ({{ item.performance_count }}):</strong>
                <div>
                    {% for band in item.bands %}
                    <span class="band-tag">{{ band.band_name }}</span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
{% else %}
    <p>–ù–∞ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è –∫–æ–Ω—Ü–µ—Ä—Ç–æ–≤ –Ω–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ.</p>
{% endif %}
{% endblock %}
```

`concertsshower/tests.py`:

```py
from django.test import TestCase

# Create your tests here.

```

`concertsshower/urls.py`:

```py
from django.urls import path
from . import views

app_name = 'concertsshower'

urlpatterns = [
    path('upcoming/', views.upcoming_concerts, name='upcoming_concerts'),
    path('all/', views.all_concerts, name='all_concerts'),
    path('concert/<int:concert_id>/', views.concert_detail, name='concert_detail'),
]
```

`concertsshower/views.py`:

```py
from django.shortcuts import render, get_object_or_404
from django.utils import timezone
from core.models import Concert, Performance, Band


def upcoming_concerts(request):
    now = timezone.now()
    
    concerts = Concert.objects.filter(
        concert_date__gte=now
    ).order_by('concert_date')[:10]
    
    concerts_with_bands = []
    for concert in concerts:
        performances = Performance.objects.filter(concert=concert).select_related('band')
        bands = [performance.band for performance in performances]
        concerts_with_bands.append({
            'concert': concert,
            'bands': bands,
            'performance_count': len(bands)
        })
    
    context = {
        'concerts_with_bands': concerts_with_bands,
        'current_time': now,
    }
    
    return render(request, 'concertsshower/upcoming_concerts.html', context)


def concert_detail(request, concert_id):
    concert = get_object_or_404(Concert, concert_id=concert_id)
    performances = Performance.objects.filter(
        concert=concert
    ).select_related('band').order_by('performance_order')
    
    context = {
        'concert': concert,
        'performances': performances,
    }
    
    return render(request, 'concertsshower/concert_detail.html', context)


def all_concerts(request):
    from_date = request.GET.get('from_date')
    to_date = request.GET.get('to_date')
    search_query = request.GET.get('search', '')
    
    concerts = Concert.objects.all()
    
    if from_date:
        concerts = concerts.filter(concert_date__gte=from_date)
    if to_date:
        concerts = concerts.filter(concert_date__lte=to_date)
    if search_query:
        concerts = concerts.filter(concert_title__icontains=search_query)
    
    concerts = concerts.order_by('concert_date')
    
    context = {
        'concerts': concerts,
        'search_query': search_query,
    }
    
    return render(request, 'concertsshower/all_concerts.html', context)
```

`config/asgi.py`:

```py
"""
ASGI config for config project.
"""

import os
from django.core.asgi import get_asgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')

application = get_asgi_application()

```

`config/settings.py`:

```py
import os
from pathlib import Path

BASE_DIR = Path(__file__).resolve().parent.parent

SECRET_KEY = os.environ.get('SECRET_KEY', 'django-insecure-dev-key')
DEBUG = True
ALLOWED_HOSTS = ['*']

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'core.apps.CoreConfig',  
    'booking.apps.BookingConfig',
    'concertsshower.apps.ConcertsshowerConfig'
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'config.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'config.wsgi.application'

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'concerts_and_rehearsals',
        'USER': 'postgres',
        'PASSWORD': 'postgres',
        'HOST': 'db',
        'PORT': '5432',
    }
}

AUTH_PASSWORD_VALIDATORS = []

LANGUAGE_CODE = 'en-us'
TIME_ZONE = 'UTC'
USE_I18N = True
USE_TZ = True

STATIC_URL = 'static/'
DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

```

`config/urls.py`:

```py
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('book/', include('booking.urls')),
    path('concerts/', include('concertsshower.urls')),
]
```

`config/wsgi.py`:

```py
"""
WSGI config for config project.
"""

import os
from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')

application = get_wsgi_application()

```

`core/admin.py`:

```py
from django.contrib import admin
from .models import Musician, Band, Concert, Performance, Rehearsal, BandMembership


@admin.register(Musician)
class MusicianAdmin(admin.ModelAdmin):
    list_display = ('first_name', 'last_name', 'phone', 'instrument', 'telegram')
    list_filter = ('instrument',)
    search_fields = ('first_name', 'last_name', 'phone', 'instrument')


@admin.register(Band)
class BandAdmin(admin.ModelAdmin):
    list_display = ('band_name', 'genre', 'founded_date')
    list_filter = ('genre', 'founded_date')
    search_fields = ('band_name', 'genre')


@admin.register(Concert)
class ConcertAdmin(admin.ModelAdmin):
    list_display = ('concert_title', 'venue_address', 'concert_date')
    list_filter = ('concert_date',)
    search_fields = ('concert_title', 'venue_address')
    date_hierarchy = 'concert_date'


@admin.register(Performance)
class PerformanceAdmin(admin.ModelAdmin):
    list_display = ('concert', 'band', 'performance_order')
    list_filter = ('concert', 'band')
    autocomplete_fields = ['concert', 'band']


@admin.register(Rehearsal)
class RehearsalAdmin(admin.ModelAdmin):
    list_display = ('band', 'rehearsal_date', 'duration_minutes', 'location')
    list_filter = ('band', 'rehearsal_date')
    search_fields = ('location', 'band__band_name')
    date_hierarchy = 'rehearsal_date'


@admin.register(BandMembership)
class BandMembershipAdmin(admin.ModelAdmin):
    list_display = ('musician', 'band', 'join_date')
    list_filter = ('band', 'join_date')
    search_fields = ('musician__first_name', 'musician__last_name', 'band__band_name')
    autocomplete_fields = ['musician', 'band']

```

`core/apps.py`:

```py
from django.apps import AppConfig


class CoreConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'core'

```

`core/forms.py`:

```py
from django import forms
from django.core.exceptions import ValidationError
from django.utils import timezone
from .models import Musician, Band, Concert, BandMembership


class MusicianForm(forms.ModelForm):
    class Meta:
        model = Musician
        fields = '__all__'
    
    def clean_phone(self):
        phone = self.cleaned_data.get('phone')
        if not phone.startswith('+375'):
            raise ValidationError('Phone must start with +375')
        if len(phone) != 13:  # +375 + 9 digits
            raise ValidationError('Phone must be 13 characters long')
        return phone
    
    def clean_telegram(self):
        telegram = self.cleaned_data.get('telegram')
        if telegram and not telegram.startswith('@'):
            raise ValidationError('Telegram username must start with @')
        return telegram


class BandForm(forms.ModelForm):
    class Meta:
        model = Band
        fields = '__all__'
        widgets = {
            'founded_date': forms.DateInput(attrs={'type': 'date'}),
        }
    
    def clean_founded_date(self):
        founded_date = self.cleaned_data.get('founded_date')
        if founded_date > timezone.now().date():
            raise ValidationError('Founded date cannot be in the future')
        return founded_date


class ConcertForm(forms.ModelForm):
    class Meta:
        model = Concert
        fields = '__all__'
        widgets = {
            'concert_date': forms.DateTimeInput(attrs={'type': 'datetime-local'}),
        }
    
    def clean_concert_date(self):
        concert_date = self.cleaned_data.get('concert_date')
        if concert_date < timezone.now():
            raise ValidationError('Concert date cannot be in the past')
        return concert_date


class BandMembershipForm(forms.ModelForm):
    class Meta:
        model = BandMembership
        fields = '__all__'
        widgets = {
            'join_date': forms.DateInput(attrs={'type': 'date'}),
        }
    
    def clean_join_date(self):
        join_date = self.cleaned_data.get('join_date')
        if join_date > timezone.now().date():
            raise ValidationError('Join date cannot be in the future')
        return join_date

```

`core/migrations/0001_initial.py`:

```py
# Generated by Django 5.0.3 on 2025-12-16 07:49

import django.core.validators
import django.db.models.deletion
import django.utils.timezone
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Band',
            fields=[
                ('band_id', models.AutoField(primary_key=True, serialize=False)),
                ('band_name', models.CharField(max_length=100)),
                ('genre', models.CharField(choices=[('rock', 'Rock'), ('pop', 'Pop'), ('jazz', 'Jazz'), ('blues', 'Blues'), ('classical', 'Classical'), ('electronic', 'Electronic'), ('folk', 'Folk'), ('metal', 'Metal'), ('punk', 'Punk'), ('reggae', 'Reggae'), ('hip-hop', 'Hip-Hop'), ('country', 'Country'), ('funk', 'Funk'), ('soul', 'Soul'), ('r&b', 'R&B'), ('alternative', 'Alternative'), ('indie', 'Indie'), ('hard_rock', 'Hard Rock'), ('progressive', 'Progressive'), ('house', 'House'), ('techno', 'Techno')], max_length=50)),
                ('founded_date', models.DateField(default=django.utils.timezone.now)),
            ],
            options={
                'db_table': 'bands',
            },
        ),
        migrations.CreateModel(
            name='Concert',
            fields=[
                ('concert_id', models.AutoField(primary_key=True, serialize=False)),
                ('concert_title', models.CharField(max_length=200)),
                ('venue_address', models.CharField(max_length=255)),
                ('concert_date', models.DateTimeField(default=django.utils.timezone.now)),
            ],
            options={
                'db_table': 'concerts',
            },
        ),
        migrations.CreateModel(
            name='Musician',
            fields=[
                ('musician_id', models.AutoField(primary_key=True, serialize=False)),
                ('first_name', models.CharField(max_length=50)),
                ('last_name', models.CharField(max_length=50)),
                ('phone', models.CharField(max_length=20, unique=True, validators=[django.core.validators.RegexValidator(message='Phone must be in format +375XXXXXXXXX', regex='^\\+375[0-9]{9}$')])),
                ('telegram', models.CharField(blank=True, max_length=100, null=True, validators=[django.core.validators.RegexValidator(message='Telegram must start with @', regex='^@.+')])),
                ('instrument', models.CharField(choices=[('guitar', 'Guitar'), ('bass', 'Bass'), ('drums', 'Drums'), ('keyboards', 'Keyboards'), ('piano', 'Piano'), ('vocals', 'Vocals'), ('violin', 'Violin'), ('cello', 'Cello'), ('trumpet', 'Trumpet'), ('saxophone', 'Saxophone'), ('trombone', 'Trombone'), ('flute', 'Flute'), ('clarinet', 'Clarinet'), ('accordion', 'Accordion'), ('harp', 'Harp')], max_length=50)),
            ],
            options={
                'db_table': 'musicians',
            },
        ),
        migrations.CreateModel(
            name='Performance',
            fields=[
                ('performance_id', models.AutoField(primary_key=True, serialize=False)),
                ('performance_order', models.PositiveIntegerField()),
                ('band', models.ForeignKey(db_column='band_id', on_delete=django.db.models.deletion.CASCADE, to='core.band')),
                ('concert', models.ForeignKey(db_column='concert_id', on_delete=django.db.models.deletion.CASCADE, to='core.concert')),
            ],
            options={
                'db_table': 'performances',
            },
        ),
        migrations.CreateModel(
            name='Rehearsal',
            fields=[
                ('rehearsal_id', models.AutoField(primary_key=True, serialize=False)),
                ('rehearsal_date', models.DateTimeField(default=django.utils.timezone.now)),
                ('duration_minutes', models.PositiveIntegerField()),
                ('location', models.CharField(max_length=255)),
                ('band', models.ForeignKey(db_column='band_id', on_delete=django.db.models.deletion.CASCADE, to='core.band')),
            ],
            options={
                'db_table': 'rehearsals',
            },
        ),
        migrations.CreateModel(
            name='BandMembership',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('join_date', models.DateField(default=django.utils.timezone.now)),
                ('band', models.ForeignKey(db_column='band_id', on_delete=django.db.models.deletion.CASCADE, to='core.band')),
                ('musician', models.ForeignKey(db_column='musician_id', on_delete=django.db.models.deletion.CASCADE, to='core.musician')),
            ],
            options={
                'db_table': 'band_membership',
                'unique_together': {('band', 'musician')},
            },
        ),
    ]

```

`core/models.py`:

```py
from django.db import models
from django.core.validators import RegexValidator
from django.utils import timezone


class Musician(models.Model):
    INSTRUMENT_CHOICES = [
        ('guitar', 'Guitar'),
        ('bass', 'Bass'),
        ('drums', 'Drums'),
        ('keyboards', 'Keyboards'),
        ('piano', 'Piano'),
        ('vocals', 'Vocals'),
        ('violin', 'Violin'),
        ('cello', 'Cello'),
        ('trumpet', 'Trumpet'),
        ('saxophone', 'Saxophone'),
        ('trombone', 'Trombone'),
        ('flute', 'Flute'),
        ('clarinet', 'Clarinet'),
        ('accordion', 'Accordion'),
        ('harp', 'Harp'),
    ]
    
    musician_id = models.AutoField(primary_key=True)
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    phone = models.CharField(
        max_length=20,
        unique=True,
        validators=[
            RegexValidator(
                regex=r'^\+375[0-9]{9}$',
                message='Phone must be in format +375XXXXXXXXX'
            )
        ]
    )
    telegram = models.CharField(
        max_length=100,
        blank=True,
        null=True,
        validators=[
            RegexValidator(
                regex=r'^@.+',
                message='Telegram must start with @'
            )
        ]
    )
    instrument = models.CharField(max_length=50, choices=INSTRUMENT_CHOICES)
    
    class Meta:
        db_table = 'musicians'
    
    def __str__(self):
        return f"{self.first_name} {self.last_name} ({self.instrument})"


class Band(models.Model):
    GENRE_CHOICES = [
        ('rock', 'Rock'),
        ('pop', 'Pop'),
        ('jazz', 'Jazz'),
        ('blues', 'Blues'),
        ('classical', 'Classical'),
        ('electronic', 'Electronic'),
        ('folk', 'Folk'),
        ('metal', 'Metal'),
        ('punk', 'Punk'),
        ('reggae', 'Reggae'),
        ('hip-hop', 'Hip-Hop'),
        ('country', 'Country'),
        ('funk', 'Funk'),
        ('soul', 'Soul'),
        ('r&b', 'R&B'),
        ('alternative', 'Alternative'),
        ('indie', 'Indie'),
        ('hard_rock', 'Hard Rock'),
        ('progressive', 'Progressive'),
        ('house', 'House'),
        ('techno', 'Techno'),
    ]
    
    band_id = models.AutoField(primary_key=True)
    band_name = models.CharField(max_length=100)
    genre = models.CharField(max_length=50, choices=GENRE_CHOICES)
    founded_date = models.DateField(default=timezone.now)
    
    class Meta:
        db_table = 'bands'
    
    def __str__(self):
        return f"{self.band_name} ({self.genre})"


class Concert(models.Model):
    concert_id = models.AutoField(primary_key=True)
    concert_title = models.CharField(max_length=200)
    venue_address = models.CharField(max_length=255)
    concert_date = models.DateTimeField(default=timezone.now)
    
    class Meta:
        db_table = 'concerts'
    
    def __str__(self):
        return f"{self.concert_title} at {self.venue_address}"


class Performance(models.Model):
    performance_id = models.AutoField(primary_key=True)
    band = models.ForeignKey(Band, on_delete=models.CASCADE, db_column='band_id')
    concert = models.ForeignKey(Concert, on_delete=models.CASCADE, db_column='concert_id')
    performance_order = models.PositiveIntegerField()
    
    class Meta:
        db_table = 'performances'
    
    def __str__(self):
        return f"{self.band} at {self.concert} (order: {self.performance_order})"


class Rehearsal(models.Model):
    rehearsal_id = models.AutoField(primary_key=True)
    band = models.ForeignKey(Band, on_delete=models.CASCADE, db_column='band_id')
    rehearsal_date = models.DateTimeField(default=timezone.now)
    duration_minutes = models.PositiveIntegerField()
    location = models.CharField(max_length=255)
    
    class Meta:
        db_table = 'rehearsals'
    
    def __str__(self):
        return f"{self.band} rehearsal at {self.location}"


class BandMembership(models.Model):
    band = models.ForeignKey(Band, on_delete=models.CASCADE, db_column='band_id')
    musician = models.ForeignKey(Musician, on_delete=models.CASCADE, db_column='musician_id')
    join_date = models.DateField(default=timezone.now)
    
    class Meta:
        db_table = 'band_membership'
        unique_together = ('band', 'musician')
    
    def __str__(self):
        return f"{self.musician} in {self.band} since {self.join_date}"

```

`docker-compose.yml`:

```yml
services:
  db:
    image: postgres:15
    environment:
      POSTGRES_DB: concerts_db
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
    ports:
      - "5433:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 10s
      timeout: 5s
      retries: 5

  web:
    build: .
    volumes:
      - .:/app
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=postgres://postgres:postgres@db:5432/concerts_db
      - SECRET_KEY=django-insecure-test-key-12345
      - DEBUG=1
    depends_on:
      db:
        condition: service_healthy

volumes:
  postgres_data:

```

`manage.py`:

```py
"""Django's command-line utility for administrative tasks."""
import os
import sys

def main():
    """Run administrative tasks."""
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed and "
            "available on your PYTHONPATH environment variable? Did you "
            "forget to activate a virtual environment?"
        ) from exc
    execute_from_command_line(sys.argv)

if __name__ == '__main__':
    main()

```

`requirements.txt`:

```txt
asgiref==3.11.0
Django==5.2.9
psycopg2-binary==2.9.11
sqlparse==0.5.4

```